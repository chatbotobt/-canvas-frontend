<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>Canvas LMS Chatbot Frontend</title>
</head>
<body>
    <h1>Canvas LMS Chatbot</h1>
    <input id="userInput" type="text" placeholder="Type your message here" />
    <button onclick="sendMessage()">Send</button>
    <div id="chatbox"></div>

    <script>
        const backendUrl = "https://canvas-backend.hf.space/api/predict/";

        async function sendMessage() {
            const inputElem = document.getElementById("userInput");
            const chatbox = document.getElementById("chatbox");
            const userMessage = inputElem.value;
            if (!userMessage) return;

            chatbox.innerHTML += `<p><b>You:</b> ${userMessage}</p>`;

            // Send message to backend API
            try {
                const response = await fetch(backendUrl, {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({ data: [userMessage] })
                });

                const data = await response.json();
                const botReply = data.data[0];
                chatbox.innerHTML += `<p><b>Bot:</b> ${botReply}</p>`;
            } catch (err) {
                chatbox.innerHTML += `<p style="color:red;">Error contacting backend.</p>`;
            }

            inputElem.value = "";
        }
    </script>
</body>
</html>
